<html>
    <head>
        <!-- Import A-Frame -->
        <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
        <script src="https://mixedreality.mozilla.org/ammo.js/builds/ammo.wasm.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
        
        <!-- Page title -->
        <title>A-frame Soccer</title>
    </head>
    <body>
        
        <!-- Register component(s) before scene -->
        <script>
            AFRAME.registerComponent('ammo-restitution', {
                schema: { default: 0.5 },
                init() {
                    const el = this.el;
                    const restitution = this.data;
                    el.addEventListener('body-loaded', function () {
                        el.body.setRestitution(restitution);
                    });
                }
            });

            AFRAME.registerComponent('ammo-friction', {
                schema: { default: 0.5 },
                init() {
                    const el = this.el;
                    const friction = this.data;
                    el.addEventListener('body-loaded', function () {
                        el.body.setFriction(friction);
                    });
                }
            });
        </script>
        
        <!-- Create scene -->
        <a-scene  physics="driver: ammo; debug: false; debugDrawMode: 1;">

            <a-sky color="#007BA7"></a-sky>

            <!-- Create arena floor -->
            <a-entity id="arenaFloor" ammo-body="type: static" ammo-shape="type: box; fit: manual; halfExtents: 26 0.001 48" ammo-restitution="0.5" ammo-friction="1">
                <a-plane color="#228B22" height="96" width="51" rotation="-90 0 0" position="0 -0.004 0" material="shader: flat;"></a-plane>
                <a-plane color="#FFF" height="90" width="45" rotation="-90 0 0" position="0 -0.002 0"></a-plane>
                <a-plane color="#228B22" height="89.7" width="44.7" rotation="-90 0 0" position="0 0 0" material="shader: flat;"></a-plane>
            </a-entity>

            <!-- Create environment outer walls -->
            <a-plane id="worldNorthEdge" height="2.44" width="51" position="0 1.22 -48" rotation="0 0 0" color="#b0b0b0" ammo-body="type: static" ammo-shape="type: box" ammo-restitution="0"></a-plane>
            <a-plane id="worldWestEdge" height="2.44" width="96" position="-25.5 1.22 0" rotation="0 90 0" color="#b0b0b0" ammo-body="type: static" ammo-shape="type: box" ammo-restitution="0"></a-plane>
            <a-plane id="worldEastEdge" height="2.44" width="96" position="25.5 1.22 0" rotation="0 -90 0" color="#b0b0b0" ammo-body="type: static" ammo-shape="type: box" ammo-restitution="0"></a-plane>
            <a-plane id="worldSouthEdge" height="2.44" width="51" position="0 1.22 48" rotation="0 180 0" color="#b0b0b0" ammo-body="type: static" ammo-shape="type: box" ammo-restitution="0"></a-plane>

            <!-- Create hero sphere -->
            <a-sphere id="heroBall" position="0 0.11 0" radius="0.11" color="#DFFF00"
            ammo-body="type: dynamic; emitCollisionEvents: true" ammo-shape="type: sphere" ammo-restitution="0.8"></a-sphere>

            <!-- Create scene camera -->
            <a-entity camera look-controls wasd-controls position="0 1.6 10" ammo-body="type: kinematic; emitCollisionEvents: true" ammo-restitution="0.3" ammo-shape="type: box; fit: manual; halfExtents: 1 1.6 1;">
                <!-- Create cursor -->
                <a-entity cursor="fuse: true; fuseTimeout: 500"
                    position="0 0 0"
                    geometry="primitive: box; height: 3.2; width: 2; depth: 2;"
                    material="color: black; transparent: true; opacity: 0.5;">
                </a-entity>
            </a-entity>
            
        </a-scene>
    </body>
</html>
